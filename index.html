<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="TikTok Tides - The lifecycle of viral trends">
  <title>TikTok Tides | Where trends are born, surge, and transform culture</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="/src/css/tokens.css">
  <link rel="stylesheet" href="/src/css/base.css">
</head>
<body>
  <!-- Progress Bar -->
  <div class="progress-bar" aria-hidden="true"></div>

  <!-- Navigation -->
  <nav class="nav-header" role="navigation" aria-label="Main navigation">
    <div class="nav-container">
      <h1 class="nav-title">TikTok Tides</h1>
      <ul class="nav-links" role="list">
        <li><a href="#section-ignite" aria-current="false">Ignite</a></li>
        <li><a href="#section-surge" aria-current="false">Surge</a></li>
        <li><a href="#section-spillover" aria-current="false">Spillover</a></li>
        <li><a href="#section-fade" aria-current="false">Fade/Revival</a></li>
        <li><a href="#section-takeaway" aria-current="false">Takeaway</a></li>
        <li><a href="#section-ingredients" aria-current="false">Recipe</a></li>
      </ul>
    </div>
  </nav>

  <!-- Skip Link -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Landing/Hero Section -->
  <section id="section-landing" class="section hero-section bg-cosmos" role="region" aria-labelledby="hero-title">
    <div class="scene-layer scene--stars" aria-hidden="true"></div>
    <div class="starfield" aria-hidden="true"></div>
    <div class="hero-content">
      <h2 id="hero-title" class="hero-title gradient-text">TikTok Tides</h2>
      <p class="hero-subtitle">Where trends are born, surge, and transform culture</p>
      <div class="scroll-cue" aria-hidden="true">
        <span>Dive into the data</span>
        <svg width="24" height="24" viewBox="0 0 24 24">
          <path d="M12 4 L12 20 M6 14 L12 20 L18 14" stroke="currentColor" stroke-width="2" fill="none"/>
        </svg>
      </div>
    </div>
  </section>

  <main id="main-content">
    <!-- Section 1: Ignite (Stopwatch) - Centered full-width -->
    <section id="section-ignite" class="section scroll-section bg-dawn" role="region" aria-labelledby="ignite-title">
      <div class="section-container layout-center-stage">
        <div id="viz-stopwatch" class="viz-container viz-fullwidth" data-viz="stopwatch"></div>
        <div class="section-annotations">
          <div class="section-intro">
            <h2 id="ignite-title" style="display: none;">Ignite</h2>
            <p class="lead" style="display: none;">The first moments determine everything.</p>
            <p class="lab-note">Lab Note: We analyzed [PLACEHOLDER_VIDEO_COUNT] TikToks to decode the spark.</p>
          </div>

        </div>
      </div>
    </section>

    <!-- Section 2: Surge (Planets) - Fullbleed with annotation rail -->
    <section id="section-surge" class="section scroll-section bg-cosmos-deep" role="region" aria-labelledby="surge-title">
      <div class="section-container layout-fullbleed">
        <div class="section-intro">
          <h2 id="surge-title">Surge</h2>
          <p class="lead">Artists become planets, pulling content into orbit.</p>
        </div>

        <!-- Legend -->
        <div class="legend">
          <div class="legend-item">
            <strong>Planet Size:</strong> Number of viral songs
          </div>
          <div class="legend-item">
            <strong>Distance from Sun:</strong> Average energy
          </div>
        </div>

        <!-- Color Gradient Legend -->
        <div class="color-legend">
          <div class="color-legend-title">
            <strong>Planet Color:</strong> Average Danceability
          </div>
          <div class="color-gradient-container">
            <div class="color-gradient-bar"></div>
            <div class="color-gradient-labels">
              <span>0.0<br><small>Low</small></span>
              <span>0.2</span>
              <span>0.4</span>
              <span>0.6</span>
              <span>0.8</span>
              <span>1.0<br><small>High</small></span>
            </div>
          </div>
        </div>

        <div id="viz-planets" class="viz-container viz-fullbleed" data-viz="planets"></div>

        <div class="annotation-rail">
          <div class="year-selector">
            <button class="year-btn active" data-year="2019">2019</button>
            <button class="year-btn" data-year="2020">2020</button>
            <button class="year-btn" data-year="2021">2021</button>
            <button class="year-btn" data-year="2022">2022</button>
          </div>
          <p class="annotation" aria-live="polite">Top artists spawn [PLACEHOLDER_REMIX_COUNT] variations</p>
        </div>
      </div>
    </section>

    <!-- Section 3: Spillover (Community Ã— Sounds) - Center network + right audio tray -->
    <section id="section-spillover" class="section scroll-section bg-city" role="region" aria-labelledby="spillover-title">
      <div class="scene-layer scene--grid" aria-hidden="true"></div>
      <div class="section-container layout-network-audio">
        <div class="section-intro">
          <h2 id="spillover-title">Spillover</h2>
          <p class="lead">#BookTok. #FoodTok. #CleanTok. Communities emerge.</p>
        </div>

        <div class="network-container">
          <div id="viz-community" class="viz-container" data-viz="community"></div>
        </div>

        <div class="audio-tray" role="complementary" aria-label="Audio previews">
          <h3>Trending Sounds</h3>
          <button class="audio-mute-toggle" aria-label="Toggle audio preview">
            <span class="mute-icon">ðŸ”‡</span>
            <span class="unmute-icon" style="display:none">ðŸ”Š</span>
          </button>
          <div class="audio-list">
            <div class="audio-item" data-sound="sound1">
              <span class="sound-name">Trending Audio 1</span>
              <span class="sound-preview">2s preview on hover</span>
            </div>
            <div class="audio-item" data-sound="sound2">
              <span class="sound-name">Viral Beat</span>
              <span class="sound-preview">2s preview on hover</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 4: Fade/Revival (Ranking) - Full canopy + right KPI rail -->
    <section id="section-fade" class="section scroll-section bg-forest" role="region" aria-labelledby="fade-title">
      <div class="scene-layer scene--canopy" aria-hidden="true"></div>
      <div class="section-container layout-canopy">
        <div class="canopy-silhouette" aria-hidden="true"></div>

        <div class="section-intro">
          <h2 id="fade-title">Fade/Revival</h2>
          <p class="lead">Every trend follows a lifecycle.</p>
        </div>

        <div id="viz-ranking" class="viz-container viz-fullbleed" data-viz="ranking"></div>

        <div class="kpi-rail-vertical">
          <div class="kpi-item">
            <div class="kpi-value">[PLACEHOLDER_REVIVAL_PERCENTAGE]</div>
            <div class="kpi-label">% see comebacks</div>
          </div>
          <div class="detail-panel" aria-hidden="true" role="region" aria-label="Topic details">
            <h4>Topic Breakdown</h4>
            <div class="detail-content"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 5: Takeaway (Emotion) - Bubble cloud + left legend + right drawer -->
    <section id="section-takeaway" class="section scroll-section bg-neutral" role="region" aria-labelledby="takeaway-title">
      <div class="scene-layer scene--bubbles" aria-hidden="true"></div>
      <div class="section-container layout-bubble-legend-drawer">
        <div class="section-intro">
          <h2 id="takeaway-title">The Formula</h2>
          <p class="lead">The emotional formula of virality</p>
        </div>

        <div class="legend-panel" role="complementary" aria-label="Emotion categories">
          <h3>Emotion Categories</h3>
          <ul class="emotion-legend" role="list"></ul>
        </div>

        <div id="viz-emotion" class="viz-container" data-viz="emotion"></div>

        <div class="detail-drawer" aria-hidden="true" role="dialog" aria-labelledby="drawer-title">
          <button class="drawer-close" aria-label="Close details">Ã—</button>
          <h3 id="drawer-title">Emotion Details</h3>
          <div class="drawer-content">
            <div class="sparkline-container"></div>
            <div class="example-phrases"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 6: Ingredients Quiz - Card grid + modal -->
    <section id="section-ingredients" class="section scroll-section bg-lab" role="region" aria-labelledby="ingredients-title">
      <div class="section-container layout-cards">
        <div class="section-intro">
          <h2 id="ingredients-title">Build Your Trend Recipe</h2>
          <p class="lead">Mix the right ingredients for viral success</p>
        </div>

        <div id="viz-ingredients" class="viz-container" data-viz="ingredients"></div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <p>Created by Team TrendTokers for CSC316</p>
    <a href="https://github.com/[repo]">View on GitHub</a>
  </footer>

  <!-- Live Region for Screen Readers -->
  <div role="status" aria-live="polite" aria-atomic="true" class="sr-only"></div>

  <!-- D3.js -->
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <!-- Main App -->
  <script type="module" src="/src/js/main.js"></script>

  <!-- Inline SVG Noise Filter -->
  <svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden">
    <filter id="noise" x="0" y="0" width="100%" height="100%">
      <feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="4" stitchTiles="stitch"/>
      <feColorMatrix type="matrix"
        values="0 0 0 0 0
                0 0 0 0 0
                0 0 0 0 0
                0 0 0 0.12 0" />
    </filter>
  </svg>
  <div class="grain-overlay" aria-hidden="true"></div>
  <style>
    .grain-overlay{
      position:fixed;inset:0;pointer-events:none;z-index:9999;
      background:#000;filter:url(#noise);mix-blend-mode:overlay;opacity:.06;
    }
    @media (prefers-reduced-motion: reduce){ .grain-overlay{ display:none; } }
  </style>
</body>
</html>